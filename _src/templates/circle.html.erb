<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Henge: <%= pattern %></title>
</head>
<body>
<header>
<h1 style="margin:0"><img src="/imgs/logo.svg" alt="Henge" style="margin:20px;width:360px"></h1>
</header>

#<%= idx %> <%= pattern %>

<article>
<ul>
<%- words.each do |word| -%>
<li><a href="https://www.google.com/search?safe=off&tbm=isch&q=<%= word %>" target="_blank"><%= word %></a></li>
<%- end -%>
</ul>

<a href="javascript:speak()">Listen</a> | <a href="">Story</a> |

<a href="">Random</a> | <a href="">Next</a>

<p>settings</p>
<form>
<label><input type="radio" name="search" checked> Image</label>
<label><input type="radio" name="search"> <input type="text" value="意味" size="8"></label>
<select>
<option>ja</option>
</select>
</form>


</article>
<script type="text/javascript">
<%-
speech_text = ''
if words.length == 8
  speech_text = words[0..3].join(' ') + ', ' + words[4..7].join(' ')
else
  speech_group = []
  unit = words.length / 4
  4.times do |i|
    speech_group << words[unit * i, unit].join(' ')
  end
  speech_text = speech_group.join(', ')
end
-%>
function speak() {
  var speech = new SpeechSynthesisUtterance();
  speech.lang = 'en-US';
  speech.voiceURI = 'native';
  speech.volume = 1;
  speech.rate = 1;
  speech.pitch = 1;
  speech.text = "<%= speech_text %>";
  speechSynthesis.speak(speech);
}
</script>

</body>
</html>
